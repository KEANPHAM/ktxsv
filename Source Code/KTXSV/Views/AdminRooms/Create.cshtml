@model KTXSV.Models.Room
@{
    ViewBag.Title = "Thêm phòng mới";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<style>
    .card {
        border-radius: 12px;
        border: none;
        max-width: 600px;
        margin: 0 auto;
    }

    label {
        font-weight: 600;
    }

    .alert-danger {
        max-width: 600px;
        margin: 0 auto 20px;
        font-size: 15px;
        background-color: #ffeaea;
        border: 1px solid #f5c2c7;
    }
</style>

<h2 class="text-center fw-bold mb-4" style="color:#EE6823;">
    <i class="bi bi-house-add-fill me-2"></i>Thêm phòng mới
</h2>

@if (ViewBag.Error != null)
{
    <div class="alert alert-danger text-center shadow-sm rounded-3 py-2 mx-auto" style="max-width:600px;">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        @ViewBag.Error
    </div>
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="bg-b shadow-sm p-4 bg-white">
        <!-- Tòa nhà -->
        <div class="form-group mb-3">
            @Html.LabelFor(m => m.Building)
            <input type="text" id="Building" name="Building" class="form-control" placeholder="VD: A/B"  />
            @Html.ValidationMessageFor(m => m.Building, "", new { @class = "text-danger small" })
        </div>

        <!-- Giới tính -->
        <div class="form-group mb-3">
            <label class="form-label fw-semibold">Giới tính</label>
            <input type="text" id="GenderDisplay" class="form-control" value="@((Model?.Building?.Trim().ToUpper() == "A") ? "Nam" : "Nữ")" readonly />
            <input type="hidden" id="Gender" name="Gender" value="@((Model?.Building?.Trim().ToUpper() == "A") ? "Male" : "Female")" />
        </div>

        <!-- Số phòng -->
        <div class="form-group mb-3">
            @Html.LabelFor(m => m.RoomNumber)
            @Html.TextBoxFor(m => m.RoomNumber, new { @class = "form-control", placeholder = "VD: A0101" })
            @Html.ValidationMessageFor(m => m.RoomNumber, "", new { @class = "text-danger small" })
        </div>

        <!-- Số giường tối đa -->
        <div class="form-group mb-3">
            @Html.LabelFor(m => m.Capacity)
            @Html.TextBoxFor(m => m.Capacity, new { @class = "form-control", placeholder = "VD: 4" })
            @Html.ValidationMessageFor(m => m.Capacity, "", new { @class = "text-danger small" })
        </div>

        <!-- Giá phòng -->
        <div class="form-group mb-3">
            @Html.LabelFor(m => m.Price)
            @Html.TextBoxFor(m => m.Price, new { @class = "form-control", placeholder = "VD: 1000000" })
            @Html.ValidationMessageFor(m => m.Price, "", new { @class = "text-danger small" })
        </div>      

        <!-- Trạng thái -->
        <div class="form-group mb-4">
            @Html.LabelFor(m => m.Status)
            @Html.DropDownListFor(m => m.Status,
                new SelectList(new[] { "Available", "Full", "Maintenance" }),
                "Chọn trạng thái", new { @class = "form-select" })
            @Html.ValidationMessageFor(m => m.Status, "", new { @class = "text-danger small" })
        </div>

        <!-- Nút submit / hủy -->
        <div class="text-start">
            <button type="submit" class="btn btn1 px-4 me-2">
                <i class="bi bi-plus-circle"></i> Thêm phòng
            </button>
            <a href="@Url.Action("Index")" class="btn btn-secondary rounded-4 px-4">
                <i class="bi bi-x-circle"></i> Hủy
            </a>
        </div>
    </div>
}

<script>
    const buildingInput = document.getElementById('Building');
    const genderDisplay = document.getElementById('GenderDisplay');
    const genderHidden = document.getElementById('Gender');

    buildingInput.addEventListener('input', function () {
        const value = buildingInput.value.trim().toUpperCase();
        if (value === "A") {
            genderDisplay.value = "Nam";
            genderHidden.value = "Male";
        } else if (value !== "") {
            genderDisplay.value = "Nữ";
            genderHidden.value = "Female";
        } else {
            genderDisplay.value = "Chưa xác định";
            genderHidden.value = "";
        }
    });
</script>
